<div ng-init="init()">

  <div class="menu">
    <p>
      <button ng-click="togglePlay()">Toggle Play</button>
      <button ng-click="resetEntities()">Reset</button>
    </p>
    <p>
      <button ng-click="setTool(Tool.Paint)">Add</button>
      <button ng-click="setTool(Tool.Delete)">Remove</button>
      <button ng-click="setTool(Tool.Inspect)">Inspect</button>
    </p>
    <label>ROWS</label>
    <input ng-model="rows" ng-change="changeSize(rows, cols)">
    <label>COLS</label>
    <input ng-model="cols" ng-change="changeSize(rows, cols)">
    <label>TILE SIZE</label>
    <input ng-model="tile_size" ng-change="changeTileSize(tile_size)">
    <p>
      Width: {{ width }}<br>
      Height: {{ height }}
    </p>
    <ul ng-show="current_tool == Tool.Paint">
      <li ng-repeat="obj in game_objects" ng-click="selectEntity(obj)">{{ obj.class_name }}</li>
    </ul>

    <ul ng-show="(current_tool == Tool.Inspect || current_tool == Tool.SetWaypoint) && current_inspect_cell">
      <li ng-repeat="obj in current_inspect_cell" ng-click="selectEntity(obj)">{{ obj.type }}</li>
    </ul>

    <ul ng-show="current_inspect_entity !== null">
      <button ng-click="createTriggerEvent(current_inspect_entity)">Add trigger</button>

      <ul>
        <li ng-repeat="trigger in current_inspect_entity.trigger_events" ng-click="setActiveTrigger(current_inspect_entity, trigger)">Trigger</li>
      </ul>

      <div ng-show="current_inspect_entity.active_trigger">
        <ul>
          <li ng-repeat="(key, val) in onTriggerEvents" ng-click="setTriggerEvent(current_inspect_entity, key)">{{ key }}</li>
        </ul>

        <div ng-show="current_inspect_entity.active_trigger && current_inspect_entity.active_trigger.trigger_event">
          <li><button ng-click="selectOtherObject('copyWaypoints')">Copy Waypoints</button></li>
          <li><button ng-click="setTool(Tool.SetWaypoint)">Set Waypoints</button></li>
          <li><button ng-click="resetWaypoints(current_inspect_entity)">Reset Waypoints</button></li>
          <div ng-show="current_inspect_entity.waypoint_queue">
            <ul>
              <li ng-repeat="(key, val) in move_types" ng-click="setWaypointType(key)">{{ val }}</li>
            </ul>
            Speed-x:
            <input type="text" ng-value="current_inspect_entity.vel.x" ng-model="current_inspect_entity.vel.x">
            Speed-y:
            <input type="text" ng-value="current_inspect_entity.vel.y" ng-model="current_inspect_entity.vel.y">
            <ul>
              <li ng-repeat="wp in current_inspect_entity.waypoint_queue">
                [{{wp.x}}, {{wp.y}}]<br>
                <input type="text" ng-model="wp.wait" ng-value="wp.wait" style="width: 30px;">
                <button ng-click="removeWaypoint($index)">X</button>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </ul>

    <div ng-show="current_tool == Tool.SelectOtherObject">
      <ul>
        <li ng-repeat="entity in selected_cell" ng-click="selectObject(entity)">{{ entity.type }}</li>
      </ul>
    </div>
  </div>

  <div class="content">
    <div id="canvas_container" ng-style="{width: width + 'px', height: height + 'px'}" ng-mousedown="onCanvasMousedown($event)" ng-mouseup="onCanvasMouseup($event)"></div>
  </div>

<div class="hidden">

</div>
</div>
